/**
*	Type: package
*	Name: json
*	Description: This package holds helper functions used by
*                exported json functions. This functions are not
*                visible outside of this package.
*
*
*	Authors: Charan Ravela
*	Created On: 04-12-2023
*	Last Modified: 04-12-2023
 */
package json

import (
	"encoding/json"
	"io"
)

/**
*	Type: function
*	Name: readJson
*	Params:
*		- Name: filepath
*		  Type: string
*		  Description: Expected file path.
*	returns: any
* 	Description: reads the json file at given path and returns the data.
*
*	Exported: false
*
*	Authors: Charan Ravela
*	Created On: 04-12-2023
*	Last Modified: 04-12-2023
 */
func readJson(file io.Reader) interface{} {
	var data []map[string]interface{}

	decoder := json.NewDecoder(file)
	decoder.Token()

	item := map[string]interface{}{}
	for decoder.More() {
		decoder.Decode(&item)

		data = append(data, item)
	}

	return data
}

/**
*	Type: function
*	Name: writeJson
*	Params:
*		- Name: filepath
*		  Type: string
*		  Description: Expected file path.
*		- Name: data
*		  Type: any
*		  Description: Data to write to file.
*	returns: int64
* 	Description: Writes the data to the json file at the given path.
*
*	Exported: false
*
*	Authors: Charan Ravela
*	Created On: 04-12-2023
*	Last Modified: 04-12-2023
 */
func writeJson(file io.Writer, data interface{}) {
	encoder := json.NewEncoder(file)
	encoder.SetIndent(" ", "	")

	err := encoder.Encode(data)
	if err != nil {
		panic(err)
	}
}
